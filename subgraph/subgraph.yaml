specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: OxUSD
    network: mainnet
    source:
      address: "0x0000000000000000000000000000000000000000" # Placeholder
      abi: OxUSD
      startBlock: 0 # Placeholder
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: typescript
      entities:
        - SystemState
      abis:
        - name: OxUSD
          file: ./abis/OxUSD.json # Assumes ABIs are here
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      file: ./src/mappings.ts
  - kind: ethereum
    name: PSM
    network: mainnet
    source:
      address: "0x0000000000000000000000000000000000000000" # Placeholder
      abi: PSM
      startBlock: 0 # Placeholder
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: typescript
      entities:
        - Swap
        - PSMRoute
      abis:
        - name: PSM
          file: ./abis/PSM.json
      eventHandlers:
        - event: Swap(indexed address,indexed address,uint256,uint256,uint256)
          handler: handleSwap
        - event: RouteUpdated(indexed address,uint128,uint16)
          handler: handleRouteUpdated
      file: ./src/mappings.ts
  - kind: ethereum
    name: AllocatorVault
    network: mainnet
    source:
      address: "0x0000000000000000000000000000000000000000" # Placeholder
      abi: AllocatorVault
      startBlock: 0 # Placeholder
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: typescript
      entities:
        - Allocator
        - AllocatorAction
      abis:
        - name: AllocatorVault
          file: ./abis/AllocatorVault.json
      eventHandlers:
        - event: AllocatorMint(indexed address,indexed address,uint256)
          handler: handleAllocatorMint
        - event: AllocatorRepay(indexed address,indexed address,uint256)
          handler: handleAllocatorRepay
        - event: LineUpdated(indexed address,uint128,uint128)
          handler: handleLineUpdated
      file: ./src/mappings.ts
  - kind: ethereum
    name: SavingsVault
    network: mainnet
    source:
      address: "0x0000000000000000000000000000000000000000" # Placeholder
      abi: SavingsVault
      startBlock: 0 # Placeholder
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: typescript
      entities:
        - User
        - SavingsAction
      abis:
        - name: SavingsVault
          file: ./abis/SavingsVault.json
      eventHandlers:
        - event: Deposit(indexed address,indexed address,uint256,uint256)
          handler: handleDeposit
        - event: Withdraw(indexed address,indexed address,uint256,uint256)
          handler: handleWithdraw
      file: ./src/mappings.ts
  - kind: ethereum
    name: ParamRegistry
    network: mainnet
    source:
      address: "0x0000000000000000000000000000000000000000" # Placeholder
      abi: ParamRegistry
      startBlock: 0 # Placeholder
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: typescript
      entities:
        - AddressParamUpdated
        - UintParamUpdated
        - BoolParamUpdated
      abis:
        - name: ParamRegistry
          file: ./abis/ParamRegistry.json
      eventHandlers:
        - event: AddressParamUpdated(indexed bytes32,indexed address)
          handler: handleAddressParamUpdated
        - event: UintParamUpdated(indexed bytes32,uint256)
          handler: handleUintParamUpdated
        - event: BoolParamUpdated(indexed bytes32,bool)
          handler: handleBoolParamUpdated
      file: ./src/mappings.ts
